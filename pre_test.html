<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=0" />

    <title></title>

<style>



  .searchbar {
 border-radius: 10px;
 background: #ccc;
 height: 44px;
 width: 90%;
 margin: 5%;
 background-color: #f2f2f2;
 border: 2px solid #808080;



 position:absolute;
 top:0;
 left:0;
}

.content {
  overflow: scroll;

  background-color: #121212;

  width: 100%;
  height: 100%;
  position: absolute;
  left:0;
  top:0;
}

.playerholder {
  overflow: scroll;

  background-color: #121212;

  width: 100%;
  height: 0px;
  position: absolute;
  left:0;
  bottom:0;

    transition: all 0.2s linear;
}

.dockbar {

  transition: all 0.4s linear;

  overflow: hidden;

  background-color: #444963;

  position: absolute;
  left: 0; bottom: 0; right: 0;

  margin-left: 2%;
  margin-right: 2%;

  width: 96%;
  height: 10%;
}

.backbutton {

  transition: all 0.4s linear;

  position: absolute;
  bottom: 40px; right: 30px;


}


.search {
  -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;
  font-size: 1.2em;
  border: 0px;
  padding: 0px;
  margin: 5px;
  margin-left: 5%;
  margin-right: 5%;
  width: 90%;
  height: 80%;
}

.alveysvisibledock {
    background-color: #f2f2f2;

    margin: 5px;
    width: 96%;
    margin-left: 2%;
    margin-right: 2%;
    height: 60px;
}

.card {
  background-color: #3d1920;
  width: 47.5%;
  margin: 1%;
  display: inline-block;
  position: relative;
  border-radius: 5px;
  overflow: hidden;
}

.discription{
  color: #e0e0e0;
  background-color: #1f1f1f;
  width: 100%;
  height: auto;
  bottom: 0;
  position: absolute;
  padding: 1px;
}

.series{
  border-radius: 2px;
  color: #7d7d7d;
  background-color: #1f1f1f;
  width: auto;
  height: auto;
  top: 30px;
  right: 0;
  position: absolute;
  padding: 1px;
}

.none {
  display: none;
}

.status{
  border-radius: 2px;
  color: #7d7d7d;
  background-color: #1f1f1f;
  width: auto;
  height: auto;
  top: 5px;
  right: 0;
  position: absolute;
  padding: 1px;
}

</style>

<script>
  function func1() {
    if (document.getElementById("check").checked == false) {
      document.getElementById("dockbar").style.height = "75%";
      document.getElementById("check").checked = true;
    } else {
      document.getElementById("dockbar").style.height = "10%";
      document.getElementById("check").checked = false;
    }

  }
</script>



<script type="text/javascript">

  var currentpage = 1;

      function scrolled(o)
      {
          //visible height + pixel scrolled = total height
          if(o.offsetHeight + o.scrollTop > o.scrollHeight - 50)
          {
              currentpage++;
              avostcontent(currentpage);

          }
      }

      function togglesearch() {
        if(document.getElementById("check_search").checked == true){
          document.getElementById("searchbar").style.display = "block";
          document.getElementById("check_search").checked = false;
        } else {
          document.getElementById("searchbar").style.display = "none";
          document.getElementById("check_search").checked = true;
        }
      }


      function avostcontent(page){
        var xhr = new XMLHttpRequest();
        xhr.open('GET', `gethtml?=https://a66.agorov.org/page/` + page, false);
        xhr.send();
        var html = xhr.responseText;

        var mx = [];

        var htmlArray = html.split(' <div class="shortstoryHead">');

        htmlArray.splice(0, 1);

        var count = htmlArray.length;

        for (var i = 0; i < count; i++) {
          mx.push(reprocess(htmlArray[i]));
        }


        var elem = document.getElementById("cardholder");

        for (var i = 0; i < mx.length; i++) {

          let htmlconstruct = '<div class="card"> <img src="' + 'https://a66.agorov.org/' + mx[i][1] + '" width="100%" height="100%" alt="wut?"> <div class="status"> ' + mx[i][3] + ' </div> ';
          if(mx[i].length>4) {htmlconstruct+= ' <div class="series"> ' + mx[i][4] + ' </div> '}
          htmlconstruct+=' <div class="discription"> ' + mx[i][0] + ' </div> </div>';

          elem.innerHTML+= htmlconstruct;

        }


      }

      function reprocess(html) {

        var mx = [];

        mx.push(html.split('alt=')[1].split("\"")[1]);

        mx.push(html.split('src=')[1].split("\"")[1]);

        mx.push(html.split('href=')[1].split("\"")[1]);

        mx.push(html.split('href="')[1].split(">")[1].split("<")[0].split("[")[1].split("]")[0]);

        if(html.split('href="')[1].split(">")[1].split("<")[0].split("[").length > 2) {
          mx.push(html.split('href="')[1].split(">")[1].split("<")[0].split("[")[2].split("]")[0]);
        }

        return mx;
      }

//-----------------------------------

  function toggleplayerholder(){
    if(document.getElementById("check_player").checked == true){
      document.getElementById("playerholder").style.height = "0px";
      document.getElementById("check_player").checked = false;
    } else {
      document.getElementById("playerholder").style.height = "100%";
      document.getElementById("check_player").checked = true;
    }
  }

</script>


<div id="cardholder" onscroll="scrolled(this)" class="content">



</div>


<div class="searchbar" id="searchbar">
  <input class="search" type="text" name="" value="">
  <input id="check_search" class="none" type="checkbox"/>
</div>

<div class="dockbar" id="dockbar">

  <div class="alveysvisibledock" onclick="func1()">

    <input id="check" class="none" type="checkbox"/>

  </div>

  <hr>

  <div class="">

    <select name="test">
        <option value="">test</option>
        <option value="">test</option>
        <option value="">test</option>
        <option value="">test</option>
        <option value="">test</option>
    </select>

    <button type="button" onclick="avostcontent(1)" name="button">refrash</button>

    <button type="button" onclick="togglesearch()" name="button">toggle search bar</button>

    <button type="button" onclick="toggleplayerholder()" name="button">toggle playerholder</button>

  </div>


</div>

<div class="playerholder" id="playerholder">
  <input id="check_player" class="none" type="checkbox"/>

  <button onclick="toggleplayerholder()" type="button" name="button">toggle back</button>
</div>

<div class="backbutton">
  <img src="https://raw.githubusercontent.com/VanillaMaster/VanillaMaster.github.io/master/back.png" width="75px" height="75px" alt="wit?">
</div>

<script>
  togglesearch();
</script>
