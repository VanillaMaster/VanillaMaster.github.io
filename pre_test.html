<!DOCTYPE html>

<style>

  .ThemeWhite{
    color: #3c4043;
  }

  .ThemeWhite div.column{
    background: #ffffff;
  }

  .ThemeWhite div.card{
    background: #ffffff;
    box-shadow: 0 1px 2px 0 rgb(60 64 67 / 30%), 0 1px 3px 1px rgb(60 64 67 / 15%);
  }

  .ThemeWhite div.dockBar{
    background: #ffffff;
    box-shadow: 0 -2px 3px 0 rgb(60 64 67 / 30%)
  }

  .ThemeWhite svg{
    fill: #3c4043;
  }

  .ThemeWhite div.popUpBar{
    background: #ffffff;
    box-shadow: 0 -2px 3px 0 rgb(60 64 67 / 30%)
  }

  .ThemeBlack{
    color: #e8eaed;
  }

  .ThemeBlack div.column{
    background: #202124;
  }

  .ThemeBlack div.card{
    background: #313235;
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 60%), 0 1px 3px 1px rgb(0 0 0 / 30%);
  }

  .ThemeBlack div.dockBar{
    background: #202124;
    box-shadow: 0 -2px 3px 0 rgb(0 0 0 / 60%), 0 -6px 10px 4px rgb(0 0 0 / 30%);
  }

  .ThemeBlack svg{
    fill: #e8eaed;
  }

  .ThemeBlack div.popUpBar{
    background: #202124;
    box-shadow: 0 -2px 3px 0 rgb(0 0 0 / 60%), 0 -6px 10px 4px rgb(0 0 0 / 30%);
  }

  .dockBar{
    padding: 0 10px 0 10px;
    width: calc(100% - 20px);
    height: 60px;
    position: absolute;
    text-align: end; /* remove it*/
  }

  .column{
    width: 100%;
    height: calc(100% - 60px);
    overflow-y: scroll;
  }

  .popUpBar{
    position: absolute;
    width: 100%;
    bottom: -20px;
    transition: height 0.2s;
    border-radius: 10px 10px 0 0;
  }

  .card{
    margin: 10px;
    height: auto;
    border-radius: 8px;
  }

  .tag{
    display: inline-block;
    background: orange;
    margin: 1px 2px 1px 2px;
    padding: 0 8px 0 8px;
    border-radius: 10px;
    color: white;
  }

  .image{
    display: block;
    width: 100%;
    width: -moz-available;          /* WebKit игнор. */
    width: -webkit-fill-available;  /* Mozilla игнор. */
    width: fill-available;
    padding: 5px;
    padding-bottom: 0;
  }
  .subImage{
    max-width: 100%;
    max-height: 140px;
    width: auto;
    height: auto;
    padding: 0;
  }
  .subImageHolder{
    display: inline-flex;
    max-height: 145px;
    width: auto;
  }

  .subImageContainer{
    max-height: 150px;
    padding: 2.5px;
    font-size: 0;
    text-align: start;
  }
  .imgBorder{
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select:none;
    user-select:none;
    -o-user-select:none;

    width: 100%;
    width: -moz-available;
    width: -webkit-fill-available;
    width: fill-available;

    height: 100%;
    /* height: -moz-available; */
    height: -webkit-fill-available;
    height: fill-available;

    margin: 5%;text-align: center;
  }
</style>

<script type="text/javascript">

function getCookieValue(name) {
    return document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)')?.pop() || '';
}

function showBigCard(src){
  document.getElementById("bigImage").src = src;
  document.getElementById("background").style.display = "block";
  document.getElementById('BackgroundColor').style.opacity='0.5';
}

function hideBigCard(){
    document.getElementById("background").style.display = "none";
    document.getElementById('BackgroundColor').style.opacity='0';
}

function changeTheme() {
  if (getCookieValue("theme") == "black") {
    document.getElementById("body").setAttribute("class","ThemeWhite");
    document.cookie = "theme=white";
  } else {
    document.getElementById("body").setAttribute("class","ThemeBlack");
    document.cookie = "theme=black";
  }
}

function loadTheme() {
  if (getCookieValue("theme") == "black") {
    document.getElementById("body").setAttribute("class","ThemeBlack");
  } else {
    document.getElementById("body").setAttribute("class","ThemeWhite");
  }

}

function hideAllPopUp() {
  hideSettings();
  hideFilter();
}

function showSettings() {
  document.getElementById('settingsBackground').style.display='block';
  document.getElementById('BackgroundColor').style.opacity='0.5';
  document.getElementById('settings').style.height='280px';
}

function showFilter() {
  document.getElementById('settingsBackground').style.display='block';
  document.getElementById('BackgroundColor').style.opacity='0.5';
  document.getElementById('filter').style.height='280px';
}

function hideSettings() {
  document.getElementById('settingsBackground').style.display='none';
  document.getElementById('BackgroundColor').style.opacity='0';
  document.getElementById('settings').style.height='0px';
}

function hideFilter() {
  document.getElementById('settingsBackground').style.display='none';
  document.getElementById('BackgroundColor').style.opacity='0';
  document.getElementById('filter').style.height='0px';
}

function generateCard(jsonConfig,id){
  let card = document.createElement("div");
  card.setAttribute("class","card");

  let discription = document.createElement("div");
  discription.setAttribute("style","padding: 5px;");
  discription.textContent=jsonConfig["name"];

  card.appendChild(discription);

  let image = document.createElement("img");
  image.setAttribute("class","image");
  image.setAttribute("src",jsonConfig["mainLink"]);
  image.setAttribute("onclick",`showBigCard('${jsonConfig["mainLink"]}')`);

  card.appendChild(image);

  let subImageContainer = document.createElement("div");
  subImageContainer.setAttribute("class","subImageContainer");

  let links = jsonConfig["subLinks"].split(";");

  for (var i = 0; i < links.length; i++) {

    let subImage = document.createElement("div");
    subImage.setAttribute("class","subImageHolder");
    subImage.setAttribute("style",`max-width: ${Math.floor(10000/links.length)/100}%`);

    let padding = document.createElement("div");
    padding.setAttribute("style","padding: 2.5px;");

    let subImageIMG = document.createElement("img");

    //let imgURL = "https://raw.githubusercontent.com/VanillaMaster/images/main/img.jpg";
    //imgURL = "https://sun9-17.userapi.com/impg/4tg2k1WlegX06xixItRZC65BJjv2eP2hpOzd4g/W8dID-NZKTk.jpg?size=1080x772&quality=96&proxy=1&sign=1a199e6979cc8ecda20dd1b284020643&type=album";

    subImageIMG.setAttribute("class","subImage");
    subImageIMG.setAttribute("src",links[i]);
    subImageIMG.setAttribute("onclick",`showBigCard('${links[i]}')`);

    padding.appendChild(subImageIMG);

    subImage.appendChild(padding);

    subImageContainer.appendChild(subImage);

  }


  card.appendChild(subImageContainer);

  let tags = document.createElement("div");

  tags.setAttribute("style","padding: 5px;");
  //tags.textContent="tags";

  for (var i = 0; i < 5; i++) {
    let tag = document.createElement("div");
    tag.textContent = "tag";
    tag.setAttribute("class","tag");
    tags.appendChild(tag);
  }

  card.appendChild(tags);

  document.getElementById(id).appendChild(card);



}


</script>

<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">

<html id="html" lang="en" style="width: 100%;height: 100%;font-family: 'Open Sans', sans-serif;background: yellow;">
  <head>
    <meta id="meta" charset="utf-8" name="viewport" content="width=375, initial-scale=1">
    <title></title>
  </head>
  <body style="width: 100%; height: 100%; margin: 0; overflow: hidden;">


      <div id="body" class="ThemeWhite" style="width: 100%; height: 100%;">

        <div id="column" class="column">

        </div>


        <div class="dockBar">

          <div onclick="showFilter();" style="display: inline-block;width: 60px;height: 52px;text-align: center;font-size: 15px;padding-top: 8px;line-height: 15px;">
            <svg height="30" width="30" viewBox="0 0 24 24" >
              <path d="M0,0h24v24H0V0z" fill="none"/><path d="M0,0h24 M24,24H0" fill="none"/><path d="M4.25,5.61C6.27,8.2,10,13,10,13v6c0,0.55,0.45,1,1,1h2c0.55,0,1-0.45,1-1v-6c0,0,3.72-4.8,5.74-7.39 C20.25,4.95,19.78,4,18.95,4H5.04C4.21,4,3.74,4.95,4.25,5.61z"/><path d="M0,0h24v24H0V0z" fill="none"/>
            </svg>
            filter
          </div>

          <div onclick="showSettings();" style="display: inline-block;width: 60px;height: 52px;text-align: center;font-size: 15px;padding-top: 8px;line-height: 15px;">
            <svg height="30" width="30" viewBox="0 0 24 24" >
              <path d="M0,0h24v24H0V0z" fill="none"/><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
            </svg>
            settings
          </div>

        </div>


        <div id="background" onclick="hideBigCard();" style="top: 0;width: 100%; height: 100%;z-index: 3;position: fixed;display: none;">

          <div class="imgBorder">
            <div style="top: 50%;left: 50%;transform: translate(-50%, -50%);position: relative;">
              <img id="bigImage" onclick="event.stopPropagation();" style="width: auto;height: auto;zoom: 100;max-width: 100%;max-height: 100%;" src="https://raw.githubusercontent.com/VanillaMaster/images/main/img.jpg" alt="wut ?">
            </div>
          </div>

        </div>

        <div id="BackgroundColor" style="z-index: 1;pointer-events: none;position: fixed;width:100%;height:100%;background: black;top: 0;opacity: 0;-webkit-transition: opacity 0.5s ease-in-out;-moz-transition: opacity 0.5s ease-in-out;transition: opacity 0.5s ease-in-out;"></div>
        <div id="settingsBackground" onclick="hideAllPopUp();" style="z-index: 2;position: fixed;width:100%;height:100%;top: 0;display: none;"></div>


        <div id="settings" class="popUpBar" style="height: 0px;z-index: 3;">
          <div style="padding: 10px; height: calc(100% - 40px); width: calc(100% - 20px);">

            <div style="text-align: center;font-size: 25px;">
              Settings
            </div>

            <div onclick="hideSettings();" style="right: 10px;position: absolute;top: 5px;font-size: 20px;">X</div>

            <button onclick="changeTheme();" type="button">change theme</button>

          </div>
        </div>



        <div id="filter" class="popUpBar" style="height: 0px;z-index: 3;">
          <div style="padding: 10px; height: calc(100% - 40px); width: calc(100% - 20px);">

            <div style="text-align: center;font-size: 25px;">
              Filter
            </div>

            <div onclick="hideFilter();" style="right: 10px;position: absolute;top: 5px;font-size: 20px;">X</div>

          </div>
        </div>


      </div>

  </body>
</html>


<script type="text/javascript">
  //initialization

  document.getElementById("meta").setAttribute("content",`width=${screen.width}, initial-scale=1`);

  loadTheme();

  let data = {};

  let link = "https://sun9-17.userapi.com/impg/4tg2k1WlegX06xixItRZC65BJjv2eP2hpOzd4g/W8dID-NZKTk.jpg?size=1080x772&quality=96&proxy=1&sign=1a199e6979cc8ecda20dd1b284020643&type=album";

  data["name"] = "testName";
  data["subLinks"] = `${link};${link};${link};${link}`;
  data["mainLink"] = "https://raw.githubusercontent.com/VanillaMaster/images/main/img.jpg";

  console.log(JSON.stringify(data));

  for (var i = 0; i < 4; i++) {
    generateCard(data,"column");
  }

</script>
